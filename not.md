# 传统方法
* 填充缺失区域的最典型传统方法是复制和粘贴
- 主要思想是从图像本身或包含数百万个图像的大型数据集中搜索最相似的图像补丁，然后将其粘贴到缺失的区域中

# EdgeConnect
 首先预测缺失区域的骨架（即边缘/线条），然后根据生成的骨架填充颜色。这是“行优先，颜色接下来”的方法
* 作者将图像修复的任务简化为两个简单的步骤，即边缘预测和图像完成。第一生成器仅负责预测缺失区域的边缘，以便获得整体图像结构。预测边缘图也是显示图像骨架的二进制图。第二个生成器以预测的边缘贴图为条件，并负责以更好的纹理细节填充缺失区域。
![EdgeConnect](https://raw.githubusercontent.com/TruthK/vpn/master/md_imge/EdgeConnect.png)
上图显示了所提出方法EdgeConnect的整体网络结构。如您所见，我们熟悉用于图像修补任务的这种网络体系结构。第一生成器G<sub>1</sub>将掩模图像，被掩模的边缘图像和被掩模的灰度图像作为输入，并给出预测的边缘图。使用标准对抗损失和特征匹配损失训练该生成器。
第二生成器G<sub>2</sub>将预测的边缘图和掩蔽的RGB图像作为输入，并输出完整的RGB图像。使用样式损失，知觉损失，L<sub>1</sub>重建损失和标准对抗损失来训练此生成器。
* 损失函数  
对于第一个边缘生成器，有两个损失项，即对抗损失和特征匹配损失。对抗损失是最基本的损失，特征匹配损失类似于VGG的感知损失。对于第二个图像生成器，有四个损失项，即样式损失，感知损失，L1重建损失和对抗损失。

# Context Encoders
这些卷积层用于提取特征，从简单的结构特征到高级语义特征
* 如果网络中只有卷积层，则无法利用特征图中遥远空间位置处的特征。为了解决此问题，我们可以使用完全连接的层，以使当前层中每个神经元的值取决于上一层中所有神经元的值。
    - 通道级全连接层 : 我们只是完全独立地连接每个通道，而不是所有通道。举例来说，我们有m个特征图，大小为n * n。如果使用标准的完全连接的层，我们将有m<sup>2</sup>n<sup>4</sup> 参数不包括偏项。对于通道级全连接层，我们有mn<sup>4</sup>个参数。因此，我们可以在不添加太多额外参数的情况下从遥远的空间位置捕获要素
![Context_Encoders](https://raw.githubusercontent.com/TruthK/vpn/master/md_imge/Context%20Encoders.png)

# High-Resolution Image Inpainting using Multi-Scale Neural Patch Synthesis
本文的作者使用 U-Net like network with skip connections，其中所有标准卷积层都被提议的部分卷积层代替
* 在卷积期间将丢失的像素与有效像素分开，以便卷积的结果仅取决于有效像素。这就是为什么建议的卷积被称为部分卷积的原因。基于可自动更新的二进制掩码图像，对输入部分执行卷积。
* 部分卷积层  
让我们将W和b定义为卷积滤波器的权重和偏差。X代表卷积的像素值（或特征激活值），M代表相应的二进制掩码，该二进制掩码指示每个像素/特征值的有效性（缺失像素为0，有效像素为1）。计算出建议的部分卷积,
其中 $\bigodot$ 表示逐元素乘法，而1是形状与M相同的矩阵。从这个公式，你可以看到，部分卷积的结果只依赖于有效的输入值（如X $\bigodot$中号）。sum（1）/ sum（M）是一个缩放因子，用于随着每个卷积的有效输入值数量的变化来调整结果。